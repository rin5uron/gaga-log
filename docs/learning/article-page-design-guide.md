# 記事ページのデザインを学ぶ教材 📄

<!-- ===== このファイルの役割 =====
この教材は「記事ページのデザイン」がどこでどう決まっているかを、
初心者向けに説明するドキュメントです。
・Markdown（記事の内容）と CSS（見た目）の関係
・見出し・線（---）・目次の仕組み
・hr や見出しのスタイル指定のしかた
・「干渉」（意図しないところにデザインが当たること）の直し方
・実際に起きた問題（青い帯・目次に本文が見える等）と対応内容
を、用語解説とコード例でまとめています。
===== -->

## この教材について

**プログラミングを始めたばかりの人**や**小学生でもわかるように**、  
「記事のページ（例えば The MAYHEM Ball 東京公演レポ）のデザインが、どうやってできているか」を説明します。

難しい言葉は使わずに、**「何が」「どこで」「どう決まっているか」**がわかるようにしました。

---

## 📚 目次

1. [記事のページって何でできている？](#1-記事のページって何でできている)
2. [「見出し」と「線」と「目次」の関係](#2-見出しと線と目次の関係)
3. [デザインはどこで決まっている？](#3-デザインはどこで決まっている)
4. [「---」の線（hr）を CSS で指定する](#4---の線hrを-css-で指定する)
5. [「干渉」って何？ なぜ起きる？](#5-干渉って何-なぜ起きる)
6. [このエラーの概要（コードブロック）](#6-このエラーの概要コードブロック)
7. [困ったときのチェックリスト](#7-困ったときのチェックリスト)
8. [実例：目次に本文が入って見える問題](#8-実例目次に本文が入って見える問題)

---

<!-- セクション1：記事ページは「Markdown（内容）」と「CSS（見た目）」の2つでできている、という全体像を説明 -->
## 1. 記事のページって何でできている？

### 2つの「材料」がある

記事のページ（例えば「The MAYHEM Ball 東京公演レポ」）は、**2つの材料**でできています。

| 材料 | 役割 | 例 |
|------|------|-----|
| **Markdown（マークダウン）** | 「どんな文」「どんな見出し」「どこで区切るか」を**書く** | 記事の本文を書くファイル（`.md`） |
| **CSS（シーエスエス）** | 見出しの色や線の太さ、余白などを**見た目で決める** | `app/globals.css` |

- **Markdown** ＝ レシピに書く「材料と手順」（何を書くか）
- **CSS** ＝ 盛り付けや色づかいのルール（どう見せるか）

この2つが合わさって、ブラウザに「記事のページ」として表示されます。
- globals.css:チュートリアルのデフォルトで設定される名前、全体CSSとして使われることが多いstule.cssみたいな感じ
---

<!-- セクション2：見出し（## / ###）・線（---）・目次ボックスが、記事内でどういう役割か、どう連動しているかを説明 -->
## 2. 「見出し」と「線」と「目次」の関係

### 見出し（見出し）

記事には「**1. 実際の会場状況**」や「**1-2. 会場の雰囲気**」のような**見出し**があります。

- Markdown では **`##`（シャープ2つ）** や **`###`（シャープ3つ）** で書きます。
- ブラウザでは **大きい字・太い字** で表示されます。
- この「見出し」が、**目次のボタン**になります（クリックするとその場所に飛びます）。

### 線（---）

記事の「**ここでいったん区切る**」という場所に、**`---`（ハイフン3つ）** を書くことがあります。

- Markdown の **`---`** は、ブラウザでは **横の線（水平線）** になります。
- 「線を表示するか」「どんな線にするか」は **CSS で決めます**。

### 目次（もくじ）

ページの上の方にある **「目次」のボックス** は、記事の中の **見出し（## や ###）を自動で集めたもの** です。

- 目次は **見出しの一覧** だけを表示します。
- 本文（普通の段落）は目次には出てきません。

---

<!-- セクション3：CSSで「どの要素」にスタイルを当てるかは「クラス」で指定する。.prose / .post-content / hr などの名前と、どのファイルに書くかを説明 -->
## 3. デザインはどこで決まっている？

### 「クラス」という名前でまとめて指定する

CSS では **「この種類のものは、こういう見た目」** と、**名前（クラス）** でまとめて指定します。

このブログでは、例えば次のような名前を使っています。

| 名前（クラス） | どんなもの？ |
|----------------|--------------|
| **`.prose`** | 「記事っぽい文」が入っているブロック全体 |
| **`.post-content`** | 「この記事の本文」が入っているブロック |
| **`hr`** | Markdown の **`---`** が変わったもの（横線のタグ） |

- 記事の本文は **「prose かつ post-content」** のブロックの中に入っています。
- だから、**「.prose のなかの h2」** や **「.post-content のなかの hr」** のように指定すると、**記事の見出しや線だけ** にデザインが当たります。

### どこに書いてある？

- **Markdown** → `content/posts/` の下の **`.md` ファイル**（例：`mayhem-ball-tour-tokyo-report.md`）
- **CSS** → **`app/globals.css`** のなか

---

<!-- セクション4：Markdown の --- は HTML の hr になる。記事内の --- を「表示する／薄い線にする」指定と、info-card 内だけ非表示にする書き方をコード例で説明 -->
## 4. 「---」の線（hr）を CSS で指定する

### --- は HTML では hr になる

Markdown で書いた **`---`** は、ブラウザ用のコード（HTML）では **`<hr>`** というタグになります。  
なので、**「--- の見た目」を変えたいときは、CSS で「hr」を指定します。**

### 記事のなかの --- だけ指定したいとき

「記事の本文のなかにある --- だけ、こういう線にしたい」というときは、次のように書きます。

```css
.post-content hr {
  display: block;                    /* 線を表示する */
  border: none;                      /* ふつうの枠線は消す */
  border-top: 1px solid #e5e7eb;    /* 上だけ、薄いグレーの線を1本 */
  margin: 2.5rem 0;                  /* 線の上と下に余白をつける */
}
```

- **`.post-content hr`** ＝ 「記事の本文（post-content）のなかにある hr（---）」という意味です。
- こう書くと、**記事のなかの --- だけ** が、薄い線＋余白で表示されます。

### カードのなかの --- は出したくないとき

「info-card という箱のなかにある --- は、線として出さない」というときは、**もう少し詳しい名前** で上書きします。

```css
.post-content .info-card hr {
  display: none;   /* 線を出さない（非表示） */
}
```

- **`.post-content .info-card hr`** ＝ 「記事のなかの、さらに info-card のなかにある hr」という意味です。
- こう書くと、**カードのなかの --- だけ** 非表示になります。

### --- が水平線として認識されない・他のスタイルと干渉する原因（mayhem-ball-tour-tokyo-report など）

**起きやすい場所**: `<div class="info-card">` の**中**に Markdown の `---` を書いたとき。

**原因**  
このブログでは **remark** で Markdown を HTML に変換しています。remark（CommonMark/GFM の仕様）では、**HTML のブロック要素（`<div>` など）の「中身」は、Markdown として解釈されない**ことがあります。  
そのため、`<div class="info-card">` の内側に書いた `---` が **`<hr>` に変換されず**、ただの文字「---」や `<p>` で囲まれたテキストとして出力されることがあります。  
その結果、

- 「水平線」用の CSS（`.post-content hr`）が当たらない（`<hr>` になっていないため）
- 代わりに段落や本文用のスタイルが当たり、余白や行の高さで**意図しない見た目**になる（＝「他のスタイルと干渉している」ように見える）

という状態になります。

**対処の例**

1. **区切り線を確実に出す**: カード内で線を引きたいときは、Markdown の `---` に頼らず、**HTML で `<hr>` を直接書く**。  
   例: `<hr class="card-separator">` のように書いて、必要なら `app/globals.css` で `.card-separator` の見た目を指定する。
2. **カード内では線を出さない**: 今のように `.post-content .info-card hr { display: none; }` のままにして、カード内の区切りは **太字の見出し**や **空行**だけで表現する。
3. **全角の「ー」と半角の「-」を混同しない**: 記事中に **ーーーー**（全角の長音）を「線のつもり」で書いていると、Markdown の水平線（`---` 半角ハイフン3つ）にはならないので、`<hr>` にもならない。線にしたいときは **半角ハイフン3つ `---`** を使う。

**まとめ**  
「--- が水平線として認識されない／他と干渉している」のは、**HTML ブロック（`<div class="info-card">` など）の内側で Markdown が解釈されず、`---` が `<hr>` になっていない**ことが主な原因です。  
区切り線を確実にしたいときは、その場所で **`<hr>` を直接書く**と安全です。

---

<!-- セクション5：「干渉」＝意図した部分以外にデザインが当たること。このブログでは .prose の h2/h3 に青い帯が当たり、記事見出しにも付いてしまった例と、.post-content h2/h3 で打ち消す考え方を説明。青い帯の色が globals.css の :root で定義されていることも記載 -->
## 5. 「干渉」って何？ なぜ起きる？

### 干渉＝思っていないところにデザインが当たること

**「干渉」** とは、**「この部分だけに当てたいデザインが、別の部分にも当たってしまう」** ことです。

### なぜ起きたか（このブログの場合）

1. **「.prose のなかの h2 / h3」** に、**左に青い線（帯）** をつける CSS が書いてありました。
2. 記事の本文を入れるブロックにも **「prose」** という名前が付いていました。
3. だから、**記事の見出し（1. 実際の会場状況、1-2. 会場の雰囲気 など）にも、その青い線が当たっていました。**
4. 「記事の見出しには、その線はつけたくない」というとき、これを **干渉** と言いました。

### 青い帯の色はどこで指定している？

**ファイル**: `app/globals.css`  
**場所**: ファイルの上の方、**:root** というブロックのなか（18〜19行目付近）。

```css
:root {
  --heading-h2-border: 4px solid #3b82f6;   /* h2の左の線（青） */
  --heading-h3-border: 3px solid #94a3b8;   /* h3の左の線（グレー） */
}
```

- **h2 の帯**: **#3b82f6** という色（青）が、変数 **`--heading-h2-border`** に入っています。
- **h3 の帯**: **#94a3b8** という色（グレー）が、変数 **`--heading-h3-border`** に入っています。

この変数を、**.prose h2** と **.prose h3** のスタイルで **`border-left: var(--heading-h2-border);`** のように使っているので、「青い帯」の色を変えたいときは **:root の `#3b82f6` の部分** を書き換えます。

### 直し方の考え方

- **「この部分だけ、そのデザインをやめたい」** ときは、**もう少し詳しい名前（.post-content h2 など）** で、**「線なし」** を指定します。
- そうすると、**「.prose の h2 には線がある」** けれど **「.post-content の h2 では線を消す」** というように、**後から書いたルールが優先** されて、記事の見出しからだけ線が消えます。

---

<!-- セクション6：東京公演レポで起きた4つの問題（見出しの帯・hr表示・目次と本文の境界・目次に本文が見える）と、globals.css / TableOfContents.tsx での対応を、コピペで参照しやすい形でコードブロックにまとめたもの -->
## 6. このエラーの概要（コードブロック）

記事ページ（例：The MAYHEM Ball 東京公演レポ）で起きたデザインまわりの問題と、対応内容をコードブロックでまとめます。

```
【対象ページ】
content/posts/mayhem-ball-tour-tokyo-report.md
（表示: The MAYHEM Ball東京公演レポ）

【起きていたこと】
1. 記事の見出し（## や ###）に、意図していない「左の青・グレーの帯」がついていた
   → 原因: .prose h2 / .prose h3 に border-left が指定されており、
           記事本文のブロックにも .prose が付いているため、記事の見出しにも当たっていた

2. Markdown の ---（横線）が、表示されたり非表示にしたりするあいだで「干渉」のように感じられた
   → 原因: .prose hr / .post-content hr を display: none にすると線が消え、
            display: block にすると線が出る。どちらにするかを CSS で「指定」していなかった

3. 目次の「1-2」の下に本文が続いて見える・境界がわかりにくい
   → 原因: 目次カードと記事本文の境界が弱い、または見出しの帯で「目次の続き」のように見えていた

4. 目次ボックスの中に本文（段落）が入って見える
   → 原因: 目次は見出しリンクだけを表示しているが、目次リストに高さの上限がなく、
           記事本文（.post-content）が直下に続くため、境目がなく「目次に本文が入っている」ように見える

【対応内容（app/globals.css）】
※記事の見出しから左の帯を外す
.post-content h2,
.post-content h3 {
  border-left: none !important;
}

※---（hr）は CSS で指定して意図どおり表示する（薄い線＋余白）
.prose hr {
  display: block;
  border: none;
  border-top: 1px solid #e5e7eb;
  margin: 2rem 0;
}
.post-content hr {
  display: block;
  border: none;
  border-top: 1px solid #e5e7eb;
  margin: 2.5rem 0;
}

※info-card 内の --- だけ非表示（区切りは strong::before で出しているため）
.post-content .info-card hr {
  display: none;
}

※目次は見出しリンクだけ。本文が目次内に入って見えないよう、リストに最大高さを設ける
.toc-card {
  border: 1px solid #e5e7eb;
  overflow: hidden;
}
.toc-card .toc-list-inner {
  max-height: min(50vh, 380px);
  overflow-y: auto;
}

※目次の下＝記事本文の始まりを線で区切る
.post-content {
  border-top: 1px solid #e5e7eb;
  padding-top: 1.5rem;
}

【対応内容（components/TableOfContents.tsx）】
※目次リストを包む div にクラス toc-list-inner を付与（上記 CSS の .toc-list-inner 用）
<div className={`toc-list-inner transition-all ...`}>
```

---

<!-- セクション7：画面が変わらない・線を出したい/出したくない・帯がつく・どのファイルを触るかわからない、などのトラブル時に見るチェックリスト -->
## 7. 困ったときのチェックリスト

- [ ] 変更したのに画面が変わらない  
  → ブラウザを **再読み込み（F5）** または **スーパーリロード（Ctrl+Shift+R / Cmd+Shift+R）** してみる。
- [ ] 「---」の線を出したい  
  → `app/globals.css` で **`.post-content hr`** を探し、**`display: block`** と線の指定（`border-top` など）になっているか確認する。
- [ ] 「---」の線を出したくない  
  → **`.post-content hr`** で **`display: none`** になっているか確認する。
- [ ] 見出しに思っていない線（帯）がついている  
  → **`.post-content h2`** と **`.post-content h3`** で **`border-left: none`** が指定されているか確認する。
- [ ] どのファイルを触ればいいかわからない  
  → **見た目（線・色・余白）** → **`app/globals.css`**  
  → **文や見出しの内容** → **`content/posts/〇〇.md`**

※上記の「このエラーの概要」は [§6](#6-このエラーの概要コードブロック) のコードブロックも参照してください。

---

<!-- 用語集：この教材で出てきた Markdown / CSS / クラス / hr / .prose / .post-content の簡単な説明一覧 -->
## 参考：この教材で出てきた用語

| 用語 | やさしい説明 |
|------|----------------|
| **Markdown** | 見出しやリストを、記号（# や -）で書く書き方。 |
| **CSS** | 色・線・余白・大きさなど「見た目」を決めるルールを書くもの。 |
| **クラス** | 同じ名前を付けた要素に、同じデザインを当てるための「名前」。 |
| **hr** | 横線（水平線）のタグ。Markdown の `---` がこれになる。 |
| **.prose** | 記事っぽい文が入っているブロックについているクラス。 |
| **.post-content** | この記事の本文が入っているブロックについているクラス。 |

---

<!-- セクション8：実際に起きた「目次ボックスの中に本文が表示される」問題の原因（max-h が大きすぎた・CSSで高さ制限がなかった）と、TableOfContents.tsx / globals.css での修正内容、開発者ツールでの確認方法を具体的に説明 -->
## 8. 実例：目次に本文が入って見える問題

### 何が起きたか

目次のカード（`.toc-card`）の中に、本来表示されるべきではない**本文の段落テキスト**が入り込んで表示されていました。

例：「1-2. 会場の雰囲気・客層・ファッション」の下に、「ガガのライブって、みんなすごいコスチューム着てガガファンばっかで...」という本文が表示されていた。

### なぜ起きたか

**原因①：目次カードの高さが制限されていなかった**

`components/TableOfContents.tsx`の143行目で、目次が開いているときに次のように指定されていました：

```tsx
className={`toc-list-inner transition-all duration-300 ease-in-out ${
  isOpen ? "max-h-[2000px] opacity-100" : "max-h-0 opacity-0"
} overflow-hidden`}
```

- `max-h-[2000px]` = 最大の高さが**2000ピクセル**（とても大きい）
- これだと、目次リストの下に続く**本文まで**、目次カード内に表示されてしまいます

**原因②：HTMLの構造を誤解していた**

最初、私（AI）は「CSSの余白や境界線の問題」だと思い込んでいました。でも実際は：

- 目次カード（`.toc-card`）の中に、**本文の段落（`<p>`タグ）**が入り込んでレンダリングされていた
- これは**HTMLの構造上の問題**ではなく、**CSSの高さ制限が効いていない**ことが原因でした

### どう直したか

**修正①：巨大な高さ指定を削除**

`components/TableOfContents.tsx`の143行目を次のように修正：

```tsx
// 修正前
className={`toc-list-inner transition-all duration-300 ease-in-out ${
  isOpen ? "max-h-[2000px] opacity-100" : "max-h-0 opacity-0"
} overflow-hidden`}

// 修正後
className={`toc-list-inner transition-all duration-300 ease-in-out ${
  isOpen ? "opacity-100" : "max-h-0 opacity-0"
} overflow-hidden`}
```

- `max-h-[2000px]` を削除しました
- これで、`app/globals.css`の`.toc-card .toc-list-inner`で設定した`max-height: min(50vh, 380px)`が効くようになります

**修正②：CSSで高さを制限**

`app/globals.css`の399-402行目：

```css
.toc-card .toc-list-inner {
  max-height: min(50vh, 380px);
  overflow-y: auto;
}
```

- `max-height: min(50vh, 380px)` = 画面の高さの50%、または380ピクセルのどちらか小さい方
- これで目次カードの高さが制限され、本文が入り込まなくなります

### ブラウザ開発者ツールで確認する方法

**問題を見つけるには**：

1. **ブラウザで記事ページを開く**（例：The MAYHEM Ball東京公演レポ）
2. **F12キーを押す**（または右クリック→「検証」）
3. **Elements（要素）タブ**で、目次カードのHTMLを探す：
   ```html
   <div class="toc-card">
     <nav class="toc-card-nav">
       <div class="toc-list-inner ...">
         <ul>
           <!-- 目次リスト -->
         </ul>
       </div>
     </nav>
   </div>
   ```
4. **右側のStyles（スタイル）タブ**で、`.toc-list-inner`に適用されているCSSを確認：
   - `max-height` が設定されているか？
   - `overflow-y: auto` が設定されているか？

### 学んだこと

1. **「目次に本文が入って見える」**という説明は、**HTMLの構造の問題**である可能性がある
2. CSSで**高さを制限**しないと、その下に続くコンテンツまで表示されることがある
3. **開発者ツールのElements（要素）タブ**を見れば、HTMLの構造が分かる
4. **Styles（スタイル）タブ**を見れば、どのCSSが適用されているか分かる

---

この教材は、**The MAYHEM Ball 東京公演レポ**（`mayhem-ball-tour-tokyo-report.md`）などの記事ページのデザインを理解するためのものです。
ほかの記事ページも、同じ仕組み（Markdown ＋ CSS）でデザインが決まっています。
